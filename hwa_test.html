<html>
<head>
<title>
teststssts
</title>
</head>
<body>
<div>
  <h1>Accounts from TestRPC</h1>
  <ul id="accounts">
  </ul>
</div>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
<script type="text/javascript">
  /**
 * Sample Web3html
 * https://github.com/facebook/react-native
 * @flow
 * Author: Amit Shah
 */
//var provider = new Web3.providers.IpcProvider('/home/ubuntu/blockchain/node1/geth.ipc');
var provider = new Web3.providers.HttpProvider("http://localhost:1112");
console.log(provider);
if (!('toJSON' in Error.prototype))
      Object.defineProperty(Error.prototype, 'toJSON', {
          value: function () {
              var alt = {};
Object.getOwnPropertyNames(this).forEach(function (key) {
                  alt[key] = this[key];
              }, this);
              alt['ERROR'] = 1;
              return alt;
          },
          configurable: true,
          writable: true
  });
  CallbackHandler = function(data){
    alert(JSON.stringify(data));
  }
// var web3 = new Web3(new Web3.providers.HttpProvider("http://192.168.0.16:8545"));
  var web3 = new Web3(provider);
  function GetAccounts(){
  if(web3){
      try
      {
        var accounts = web3.eth.accounts;
        return accounts;
      }catch(e){
        CallbackHandler(e);
      }
}else{
      CallbackHandler("ERROR, NO WEB3.JS CONTEXT");
    }
    return [];
  }
var accounts = GetAccounts();

var temp = web3.eth.blockNumber;
console.log(web3);
console.log(temp);

for(var i=0; i < accounts.length; i++){
    var node = document.createElement("LI");
    var textnode = document.createTextNode(accounts[i]);
    node.appendChild(textnode);
    document.getElementById("accounts").appendChild(node);
}
</script>
</body>
</html>
